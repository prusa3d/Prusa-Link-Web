<!-- prettier-ignore -->
{#
    # This file is part of the Prusa Connect Local
    # Copyright (C) 2021 Prusa Research a.s. - www.prusa3d.com
    # SPDX-License-Identifier: GPL-3.0-or-later
#}

<!-- prettier-ignore -->
{% if env.printerFamily == "sla" %}
  {%
    set preview_props = [
      {
        'icon': 'time_color.svg',
        "data": [
          { "text": "Print Time Estimate", "format": "time", "location": "job.estimatedPrintTime", "type":"preview" },
          { "text": "Estimated end", "location": "job.estimatedPrintTime", "format": "timeEst", "type":"preview" }
        ]
     },
      {
        'icon': 'quality_medium.svg',
        "data": [
          { "text": "Layer", "format": "int","location": "job.file.layers", "type":"preview" },
          { "text": "Layer Height", "format": "layer", "location": "job.file.layerHeight", "type":"preview" }
        ]
      },
      {
        'icon': 'exposure_times_color.svg',
        "data": [
          { "text": "Exposure times", "format": "expo", "location": "job.file", "type":"preview" }
        ]
      },
      {
        'icon': 'calendar.svg',
        "data": [
          { "text": "Last Modified", "format": "date", "location": "job.file.date", "type":"preview" }
        ]
      }
    ]
  %}
{% else %}
  {%
      set preview_props = [
        {
          'icon': 'time_color.svg',
          "data": [
          { "text": "Print Time Estimate", "format": "time", "location": "job.estimatedPrintTime", "type":"preview" },
          { "text": "Estimated end", "location": "job.estimatedPrintTime", "format": "timeEst", "type":"preview" }
        ]
        },
        {
          'icon': 'calendar.svg',
          "data": [
            { "text": "Last Modified", "format": "date", "location": "job.file.date", "type":"preview" }
        ]
        }
    ]
  %}
{% endif %}

<div id="title">Project files</div>

<div class="main-wrapper row">
  <div class="preview">
    <p id="preview-name"></p>
    <div class="preview-wrapper">
      <div class="preview-img">
        <img src="../assets/thumbnail.png" />
      </div>
      <div class="preview-details">
        {% for prop in preview_props %}
        <div class="preview-prop">
          <img
            class="icon"
            src="{{ pre.countOrRenderAssets(prop.icon) | safe }}"
          />
          {% for values in prop.data %}
          <div>
            <p>{{ values.text }}</p>
            <p
              data-format="{{ values.format }}"
              data-type="{{ values.type }}"
              data-where="{{ values.location }}"
            >
              NA
            </p>
          </div>
          {% endfor %}
        </div>
        {% endfor %}
      </div>
    </div>

    <div class="preview-buttons">
      <div class="preview-buttons-first">
        <button class="no" id="delete">
          <img
            src="{{ pre.countOrRenderAssets('delete_small_white.svg') | safe }}"
          />
          <p>delete</p>
        </button>
      </div>
      <div class="buttons-wrapper">
        {% if env.printerFamily == "sla" %}
        <button class="action">
          <img
            src="{{ pre.countOrRenderAssets('exposure_times_color.svg') | safe }}"
          />
          <p>change exposure times</p>
        </button>
        {% endif %}
        <button class="yes">
          <img src="{{ pre.countOrRenderAssets('yes_color.svg') | safe }}" />
          <p>start print</p>
        </button>
        <button class="no" id="cancel">
          <img src="{{ pre.countOrRenderAssets('cancel.svg') | safe }}" />
          <p>cancel print</p>
        </button>
      </div>
    </div>
  </div>
</div>
